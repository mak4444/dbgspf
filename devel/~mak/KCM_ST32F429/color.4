
0xF800 CONSTANT RED
0x07E0 CONSTANT GREEN
0x001F CONSTANT BLUE

0x0000 CONSTANT BLACK
0xFFFF CONSTANT WHITE

0x7800 CONSTANT D_RED
0x03E0 CONSTANT D_GREEN
0x000F CONSTANT D_BLUE
0x8410 CONSTANT D_WHITE



CREATE ETLED 4 CELLS ALLOT

: BG!
 DUP	ETLED W!
 DUP	ETLED 2+ W!
 DUP	ETLED CELL+ 2+ W!
	ETLED CELL+ CELL+ W!
;

: BG@	ETLED W@ ;

: GCOLOR!
 DUP	ETLED CELL+ W!
 DUP	ETLED CELL+ CELL+ 2+ W!
 DUP	ETLED CELL+ CELL+ CELL+ W!
	ETLED CELL+ CELL+ CELL+ 2+ W! ;

: GCOLOR@ ETLED CELL+ W@ ;

: ATTRIB@ ETLED CELL+ @ ;

: ATTRIB! DUP COLOR! $10 >> BG! ;
: ATTRIB~
 -1	ETLED XOR!
 -1	ETLED CELL+ XOR!
 -1	ETLED CELL+ CELL+ XOR!
 -1	ETLED CELL+ CELL+ CELL+ XOR!

 ;

VARIABLE &COLOR
: COLOR@ &COLOR C@ ;

: COLOR! ( uc -- )
  0
  OVER 1 AND IF D_BLUE	OR THEN
  OVER 2 AND IF D_GREEN	OR THEN
  OVER 4 AND IF D_RED	OR THEN
  OVER 8 AND IF D_WHITE OR THEN    GCOLOR!
  0
  OVER 0x10 AND IF D_BLUE	OR THEN
  OVER 0x20 AND IF D_GREEN	OR THEN
  OVER 0x40 AND IF D_RED	OR THEN
  OVER 0x80 AND IF D_WHITE	OR THEN	BG!

  &COLOR C!
  
;

: CCTT 
 COLOR@
 0x100 0 DO
  I 0xF AND 0= IF CR THEN
   I COLOR! I H.  LOOP
 COLOR!
;

\EOF

: ATTRIB!

 DUP ETLED CELL+ !
 
\ COLOR
 DUP	ETLED CELL+ CELL+ 2+ W!
 DUP	ETLED CELL+ CELL+ CELL+ W!
 DUP	ETLED CELL+ CELL+ CELL+ 2+ W!

\ BG

 $10 >>
 DUP	ETLED W!
 DUP	ETLED 2+ W!
	ETLED CELL+ CELL+ W!
 
 ;

